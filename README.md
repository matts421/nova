# 5 People (Team 12) - Milestone 3

_Follow the hyperlinks to see the code location_

| #   | Category         | Task                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| --- | :--------------- | :----------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | Playability      | 5 minutes of non-repetitive gameplay | Substantial changes were made to improve the gameplay. Added [additional items](https://github.students.cs.ubc.ca/CPSC427-2024W-T2/team-12/blob/0981b404891b276896fd11ea5cb4078a0a7f624e/src/ui_system.cpp#L436C1-L487C2) including iron and copper materials. Added [ship upgrades](LINK) with resource requirements to add more gameplay progression. Added 5 distinct [biomes](https://github.students.cs.ubc.ca/CPSC427-2024W-T2/team-12/blob/0981b404891b276896fd11ea5cb4078a0a7f624e/src/map/generate.cpp#L241C1-L296C2), with different background tracks, so the island is more interesting for the player to explore. Added a simple [day-night cycle](https://github.students.cs.ubc.ca/CPSC427-2024W-T2/team-12/blob/0981b404891b276896fd11ea5cb4078a0a7f624e/shaders/vignette.fs.glsl#L45C1-L63C2) to add more interesting gameplay, and required skill to fight enemies in the night in the wilderness, or camping out by the ship for protection. Improved on the [text rendering system](https://github.students.cs.ubc.ca/CPSC427-2024W-T2/team-12/blob/0981b404891b276896fd11ea5cb4078a0a7f624e/src/render_system.cpp#L210C1-L261C1) to allow for more text on screen without performance degradation, to allow for us to build on our story, and make the gameplay experience more seamless for the user. |
| 2   | Robustness       | Memory management                    | The game handles all memory leaks and cleans up unused memory. The user can use the 'R' key to restart the game as provided in the game template.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 3   | Robustness       | Handle all user input                | Tested a variety of user input and no game crashes or unexpected behaviour. There is one noted bug with user input when tabbing out of the window; see the bug list for more details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 4   | Robustness       | Real-time gameplay                   | Depending on the hardware, the game consistently runs above 120FPS, even under the most intensive of game conditions. This has been tested through fighting many enemies at once, having multiple items on the ground, and shooting many projectiles. The game performs well.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 5   | Stability        | Bugs, crashes, resolution            | The game has a consistent and constant resolution across all displays. No crashes or glitches are present.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 6   | Software Eng.    | Test plan                            | See the [test plan](doc/test-plan.md) for more details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 7   | Reporting        | Bug list                             | See the [bug list](doc/bug-report.csv) for more details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 8   | Reporting        | Demonstration video                  | See the demo video for more details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 9   | Creative Element | Advanced decision-making             | @STEVE todo talk about a\*. You can talk also about that enemies still walk through trees on purpose for gameplay fun-ness...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 10  | Creative Element | Precise collisions                   | We now handle arbitrary convex polygons in our collision system using [SAT](https://github.students.cs.ubc.ca/CPSC427-2024W-T2/team-12/blob/26cacffde29181f4e9d91d10e6f0f089c168091d/src/collision/hitbox.cpp#L8), enabling support for complex shapes like a convex octagon projectile. While SAT is more computationally expensive than our previous rectangle-circle system, we improved performance by implementing a [quad-tree](https://github.students.cs.ubc.ca/CPSC427-2024W-T2/team-12/blob/26cacffde29181f4e9d91d10e6f0f089c168091d/src/quadtree/quadtree.hpp#L9) to pre-load static hitboxes. This increased performance by ~2x on our standard 200x200 map and enabled support for larger maps with minimal performance impact. The quad-tree is static, containing no dynamic objects, which are managed through despawn mechanisms to prevent performance degradation. Each frame includes [dynamic queries](https://github.students.cs.ubc.ca/CPSC427-2024W-T2/team-12/blob/26cacffde29181f4e9d91d10e6f0f089c168091d/src/render_system.cpp#L730) (the one linked is in render system, similar to collision system query) in both the render and collision systems.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
